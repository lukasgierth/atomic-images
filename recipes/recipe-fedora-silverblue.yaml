---
name: sleepy-schaf
description: Image based on ublue Silverblue

base-image: ghcr.io/ublue-os/silverblue-main
# base-image: quay.io/fedora-ostree-desktops/silverblue
image-version: 43

modules:
  - type: dnf
    repos:
      copr:
        - gierth/image-branding
      cleanup: true
    install:
      packages:
        - gnome-shell-extension-caffeine
        - seahorse
    remove:
      packages:
        - cosign # will be replaced by my version
        - gnome-classic-session
        - gnome-shell-extension-apps-menu
        - gnome-shell-extension-background-logo
        - gnome-shell-extension-launch-new-instance
        - gnome-shell-extension-places-menu
        - gnome-shell-extension-window-list
        - gnome-software
        - gnome-tour
        - gnome-tweaks
        - yelp

  - from-file: shared-desktop.yaml
  - from-file: modules/flatpaks-gnome.yaml

  - type: gschema-overrides
  - type: script
    scripts:
      - gnome-defaults.sh
  - type: systemd
    system:
      enabled:
        - dconf-update.service

  - type: script
    scripts:
      - prefer-bootc-over-rpm-ostree.sh
      - disable-layering.sh

  - type: os-release
    properties:
      ID: fedora
      ID_LIKE: fedora
      NAME: Sleepy Schaf
      PRETTY_NAME: Sleepy Schaf
      VARIANT: Sleepy Schaf
      VARIANT_ID: sleepy-schaf
      DEFAULT_HOSTNAME: sleepy-schaf

  - type: initramfs
  - type: signing
