---
name: tipsy-tippete
description: Image based on ublue Kinoite

base-image: ghcr.io/ublue-os/kinoite-main
# base-image: quay.io/fedora-ostree-desktops/kinoite
image-version: 42

modules:
  - from-file: shared-desktop.yaml
  - from-file: modules/flatpaks-kde.yaml

  - type: dnf
    remove:
      packages:
        - plasma-discover
        - plasma-welcome
        - kate
        - kwrite
        - plasma-emojier
        - filelight
        - khelpcenter
        - firewall-config
        - kjournald
        - kcharselect
        - fcitx5-qt
        - fcitx5-gtk
        - fcitx5-chinese-addons
        - fcitx5-hangul
        - fcitx5-libthai
        - fcitx5-mozc
        - fcitx5-sayura
        - fcitx5-unikey
        - fcitx5-configtool
        - kcm-fcitx5
    install:
      packages:
        - flatpak-kcm

  - type: dnf
    repos:
      copr:
        - ublue-os/packages
      cleanup: true
    install:
      packages:
        - aurora-backgrounds

  - type: os-release
    properties:
      ID: tipsy-tippete
      ID_LIKE: fedora
      NAME: Tipsy Tippete
      PRETTY_NAME: Tipsy Tippete

  # Needs to be at the end, because of dnf removing
  - type: script
    scripts:
      - disable-layering.sh
      - rebase_tipsy-tippete.sh

  - type: systemd
    system:
      enabled:
        - signed-autorebase.service

  - type: initramfs # only necessary for kernel/bootup/plymouth changes, do anyway here to be sure
  - type: signing # this sets up the proper policy & signing files for signed images to work fully
